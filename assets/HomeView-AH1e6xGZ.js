import{u as M,a as T}from"./MovieStore-CXBLRn5i.js";import{d as I,r as p,_ as b,o as n,c as l,a as o,b as g,w as U,e as _,t as c,f as W,u as r,n as f,g as y,h as x,v as C,i as P,j as h,F as m,k as $}from"./index-B6hkcEek.js";const w=I("searchStore",()=>{const e=p(!1),t=p([]),i=p([]);return{loader:e,movies:t,peoples:i,getMovies:async v=>{e.value=!0;const u=(await T(`search/shows?q=${v}`)).data;t.value=u.map(k=>k.show),console.log(t.value),e.value=!1},getPeoples:async v=>{e.value=!0;const u=(await T(`search/people?q=${v}`)).data;i.value=u.map(k=>k.person),console.log(i.value),e.value=!1},addToUserMovies:v=>{M().movies.push({...v,isWatched:!1})}}}),N={class:"movie-card"},j=["src","alt"],B={class:"movie-details"},q={class:"movie-name"},L={class:"movie-dates"},A=["innerHTML"],D={class:"movie-buttons"},F={key:0},H={key:1},O={__name:"Movie",props:{movie:{type:Object,required:!0},isSearch:{type:Boolean,default:!1}},setup(e){const t=M(),i=w();return(d,s)=>{var v;const a=W("router-link");return n(),l("div",N,[o("img",{src:`${((v=e.movie.image)==null?void 0:v.medium)??"../../public/no-img.jpg"}`,alt:e.movie.original_title,class:"movie-img"},null,8,j),o("div",B,[o("div",q,[g(a,{to:{name:"movie",params:{id:e.movie.id}},class:"movie-link"},{default:U(()=>[_(c(e.movie.name),1)]),_:1},8,["to"]),o("span",L," ("+c(e.movie.premiered??"No date")+c(e.movie.ended?` — ${e.movie.ended}`:"")+") ",1)]),o("div",{class:"movie-overview",innerHTML:e.movie.summary},null,8,A),o("div",D,[e.isSearch?y("",!0):(n(),l("button",{key:0,class:f({"btn-watched btn":!e.movie.isWatched,"btn-unwatched btn":e.movie.isWatched}),onClick:s[0]||(s[0]=u=>r(t).toggleWatched(e.movie.id))},[e.movie.isWatched?(n(),l("span",H,"Unwatched")):(n(),l("span",F,"Watched"))],2)),e.isSearch?y("",!0):(n(),l("button",{key:1,class:"btn btn-delete",onClick:s[1]||(s[1]=u=>r(t).deleteMovie(e.movie.id))}," Delete ")),e.isSearch?(n(),l("button",{key:2,class:"btn btn-add",onClick:s[2]||(s[2]=u=>r(i).addToUserMovies(e.movie))}," Add ")):y("",!0)])])])}}},S=b(O,[["__scopeId","data-v-7d1f9517"]]),z={},E={class:"lds-facebook"};function G(e,t){return n(),l("div",E,t[0]||(t[0]=[o("div",null,null,-1),o("div",null,null,-1),o("div",null,null,-1)]))}const V=b(z,[["render",G],["__scopeId","data-v-5ab8ac4c"]]),J={key:1},K={__name:"Search",setup(e){const t=w(),i=p("");return(d,s)=>(n(),l(m,null,[o("form",{onSubmit:s[1]||(s[1]=P(a=>r(t).getMovies(i.value),["prevent"]))},[x(o("input",{type:"text",class:"search-input",placeholder:"Input movie","onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a)},null,512),[[C,i.value]])],32),r(t).loader?(n(),h(V,{key:0})):(n(),l("div",J,[(n(!0),l(m,null,$(r(t).movies,a=>(n(),h(S,{key:a.id,movie:a,"is-search":!0},null,8,["movie"]))),128))]))],64))}},Q=b(K,[["__scopeId","data-v-eddfdeb1"]]),R={class:"person-card"},X=["src","alt"],Y={class:"person-details"},Z={class:"person-name"},ee={class:"person-dates"},te={class:"person-info"},se=["href"],oe={__name:"People",props:{person:{type:Object,required:!0,default:()=>({})}},setup(e){return(t,i)=>{var d,s;return n(),l("div",R,[o("img",{src:`${((d=e.person.image)==null?void 0:d.original)??"../../public/no-img.jpg"}`,alt:e.person.name,class:"person-img"},null,8,X),o("div",Y,[o("div",Z,[_(c(e.person.name)+" ",1),o("span",ee," ("+c(e.person.birthday??"No date")+c(e.person.deathday?` — ${e.person.deathday}`:"")+") ",1)]),o("div",te,[o("span",null,c(e.person.gender),1),i[0]||(i[0]=_(" | ")),o("a",{target:"_blank",href:`${e.person.url}`,class:"person-link"},"View Profile",8,se),i[1]||(i[1]=_(" | ")),o("span",null,c(((s=e.person.country)==null?void 0:s.name)??"Unknown Country"),1)])])])}}},ne=b(oe,[["__scopeId","data-v-ae190dd9"]]),ae={key:1},ie={__name:"SearchPeople",setup(e){const t=w(),i=p("");return(d,s)=>(n(),l(m,null,[o("form",{onSubmit:s[1]||(s[1]=P(a=>r(t).getPeoples(i.value),["prevent"]))},[x(o("input",{type:"text",class:"search-input",placeholder:"Input person","onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a)},null,512),[[C,i.value]])],32),r(t).loader?(n(),h(V,{key:0})):(n(),l("div",ae,[(n(!0),l(m,null,$(r(t).peoples,a=>(n(),h(ne,{key:a.id,person:a},null,8,["person"]))),128))]))],64))}},le=b(ie,[["__scopeId","data-v-eed1dfeb"]]),re={class:"tabs"},ce={key:0,class:"movies"},de={key:1,class:"search"},ve={key:2},he={__name:"HomeView",setup(e){const t=M(),i=d=>t.setActiveTab(d);return(d,s)=>(n(),l(m,null,[o("div",re,[o("button",{class:f(["btn",{btn_active:r(t).activeTab===1}]),onClick:s[0]||(s[0]=a=>i(1))}," Favorite ",2),o("button",{class:f(["btn",{btn_active:r(t).activeTab===2}]),onClick:s[1]||(s[1]=a=>i(2))}," Search ",2),o("button",{class:f(["btn",{btn_active:r(t).activeTab===3}]),onClick:s[2]||(s[2]=a=>i(3))}," Persons ",2)]),r(t).activeTab===1?(n(),l("div",ce,[o("h3",null,"Watched Movies (count: "+c(r(t).watchedMovies.length)+")",1),(n(!0),l(m,null,$(r(t).watchedMovies,a=>(n(),h(S,{key:a.id,movie:a},null,8,["movie"]))),128)),o("h3",null,"All Movies (count: "+c(r(t).totalCountMovies)+")",1),(n(!0),l(m,null,$(r(t).movies,a=>(n(),h(S,{key:a.id,movie:a},null,8,["movie"]))),128))])):r(t).activeTab===2?(n(),l("div",de,[g(Q)])):(n(),l("div",ve,[g(le)]))],64))}};export{he as default};
